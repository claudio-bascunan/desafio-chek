{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport class HomeComponent {\n  constructor(router) {\n    this.router = router;\n    this.firstName = '';\n    this.sessionTimeout = 2.5 * 60 * 1000; // 2.5 minutos en milisegundos\n  }\n\n  ngOnInit() {\n    // Obtener el firstname desde el token almacenado en el LocalStorage\n    const token = localStorage.getItem('access_token');\n    if (token) {\n      const tokenData = JSON.parse(atob(token.split('.')[1]));\n      this.firstName = tokenData.firstname;\n    }\n    this.startSessionTimeout();\n  }\n  beforeUnloadHandler(event) {\n    this.logout();\n  }\n  logout() {\n    // Elimina el token de acceso del LocalStorage\n    localStorage.removeItem('access_token');\n    setTimeout(() => {\n      alert('Se ha cerrado sesión.');\n    }, 500);\n    // Muestra una alerta de cierre de sesión si el usuario cierra sesión manualmente\n    // Redirige al usuario a la página de inicio de sesión (\"/login\") después de cerrar sesión\n    this.router.navigate(['/login']);\n  }\n  onActivity() {\n    clearTimeout(this.timeoutId); // Reinicia el temporizador\n    this.startSessionTimeout(); // Establece el nuevo temporizador\n  }\n\n  startSessionTimeout() {\n    this.timeoutId = setTimeout(() => this.logout(), this.sessionTimeout);\n  }\n}\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.Router));\n};\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  hostBindings: function HomeComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"beforeunload\", function HomeComponent_beforeunload_HostBindingHandler($event) {\n        return ctx.beforeUnloadHandler($event);\n      }, false, i0.ɵɵresolveWindow);\n    }\n  },\n  decls: 5,\n  vars: 1,\n  consts: [[3, \"click\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"h1\");\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_3_listener() {\n        return ctx.logout();\n      });\n      i0.ɵɵtext(4, \"Cerrar Sesi\\u00F3n\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Bienvenido \", ctx.firstName, \"\");\n    }\n  },\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["HomeComponent","constructor","router","firstName","sessionTimeout","ngOnInit","token","localStorage","getItem","tokenData","JSON","parse","atob","split","firstname","startSessionTimeout","beforeUnloadHandler","event","logout","removeItem","setTimeout","alert","navigate","onActivity","clearTimeout","timeoutId","i0","ɵɵdirectiveInject","i1","Router","selectors","hostBindings","HomeComponent_HostBindings","rf","ctx","$event","ɵɵresolveWindow","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","HomeComponent_Template_button_click_3_listener","ɵɵadvance","ɵɵtextInterpolate1"],"sources":["C:\\Users\\Claudio\\Desktop\\pruebas_tecnicas\\Chek\\src\\app\\home\\home.component.ts","C:\\Users\\Claudio\\Desktop\\pruebas_tecnicas\\Chek\\src\\app\\home\\home.component.html"],"sourcesContent":["import { Component, HostListener, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent implements OnInit {\n  firstName: string = '';\n  private sessionTimeout = 2.5 * 60 * 1000; // 2.5 minutos en milisegundos\n  private timeoutId: any; // Usa 'any' para el tipo del temporizador\n\n  constructor(private router: Router) {}\n\n  ngOnInit(): void {\n    // Obtener el firstname desde el token almacenado en el LocalStorage\n    const token = localStorage.getItem('access_token');\n    if (token) {\n      const tokenData = JSON.parse(atob(token.split('.')[1]));\n      this.firstName = tokenData.firstname;\n    }\n    this.startSessionTimeout();\n  }\n\n  @HostListener('window:beforeunload', ['$event'])\n  beforeUnloadHandler(event: Event): void {\n    this.logout();\n  }\n\n  logout(): void {\n    // Elimina el token de acceso del LocalStorage\n    localStorage.removeItem('access_token');\n\n    setTimeout(() => {\n      alert('Se ha cerrado sesión.');\n    }, 500);\n    // Muestra una alerta de cierre de sesión si el usuario cierra sesión manualmente\n\n    // Redirige al usuario a la página de inicio de sesión (\"/login\") después de cerrar sesión\n    this.router.navigate(['/login']);\n  }\n\n  onActivity(): void {\n    clearTimeout(this.timeoutId); // Reinicia el temporizador\n    this.startSessionTimeout(); // Establece el nuevo temporizador\n  }\n\n  startSessionTimeout(): void {\n    this.timeoutId = setTimeout(() => this.logout(), this.sessionTimeout);\n  }\n}\n","<div>\n    <!-- Contenido del componente home -->\n    <h1>Bienvenido {{firstName}}</h1>\n    \n    <!-- Botón para cerrar sesión -->\n    <button (click)=\"logout()\">Cerrar Sesión</button>\n  </div>"],"mappings":";;AAQA,OAAM,MAAOA,aAAa;EAKxBC,YAAoBC,MAAc;IAAd,KAAAA,MAAM,GAANA,MAAM;IAJ1B,KAAAC,SAAS,GAAW,EAAE;IACd,KAAAC,cAAc,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;EAGL;;EAErCC,QAAQA,CAAA;IACN;IACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IAClD,IAAIF,KAAK,EAAE;MACT,MAAMG,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACvD,IAAI,CAACV,SAAS,GAAGM,SAAS,CAACK,SAAS;;IAEtC,IAAI,CAACC,mBAAmB,EAAE;EAC5B;EAGAC,mBAAmBA,CAACC,KAAY;IAC9B,IAAI,CAACC,MAAM,EAAE;EACf;EAEAA,MAAMA,CAAA;IACJ;IACAX,YAAY,CAACY,UAAU,CAAC,cAAc,CAAC;IAEvCC,UAAU,CAAC,MAAK;MACdC,KAAK,CAAC,uBAAuB,CAAC;IAChC,CAAC,EAAE,GAAG,CAAC;IACP;IAEA;IACA,IAAI,CAACnB,MAAM,CAACoB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAClC;EAEAC,UAAUA,CAAA;IACRC,YAAY,CAAC,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC;IAC9B,IAAI,CAACV,mBAAmB,EAAE,CAAC,CAAC;EAC9B;;EAEAA,mBAAmBA,CAAA;IACjB,IAAI,CAACU,SAAS,GAAGL,UAAU,CAAC,MAAM,IAAI,CAACF,MAAM,EAAE,EAAE,IAAI,CAACd,cAAc,CAAC;EACvE;;AA1CWJ,aAAa,C;mBAAbA,aAAa,EAAA0B,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,MAAA;AAAA;AAAb7B,aAAa,C;QAAbA,aAAa;EAAA8B,SAAA;EAAAC,YAAA,WAAAC,2BAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;;eAAbC,GAAA,CAAAlB,mBAAA,CAAAmB,MAAA,CAA2B;MAAA,UAAAT,EAAA,CAAAU,eAAA;;;;;;;;MCRxCV,EAAA,CAAAW,cAAA,UAAK;MAEGX,EAAA,CAAAY,MAAA,GAAwB;MAAAZ,EAAA,CAAAa,YAAA,EAAK;MAGjCb,EAAA,CAAAW,cAAA,gBAA2B;MAAnBX,EAAA,CAAAc,UAAA,mBAAAC,+CAAA;QAAA,OAASP,GAAA,CAAAhB,MAAA,EAAQ;MAAA,EAAC;MAACQ,EAAA,CAAAY,MAAA,yBAAa;MAAAZ,EAAA,CAAAa,YAAA,EAAS;;;MAH7Cb,EAAA,CAAAgB,SAAA,GAAwB;MAAxBhB,EAAA,CAAAiB,kBAAA,gBAAAT,GAAA,CAAA/B,SAAA,KAAwB"},"metadata":{},"sourceType":"module","externalDependencies":[]}