{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction HomeComponent_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const log_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(log_r1.date_time);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(log_r1.status);\n  }\n}\nexport class HomeComponent {\n  constructor(router) {\n    this.router = router;\n    this.firstname = null;\n    this.logs = [];\n    this.sessionTimeout = 5 * 60 * 1000; // 5 minutos en milisegundos\n    this.isPageReloading = false;\n    this.currentPage = 1;\n    this.pageSize = 10;\n    this.totalPages = 1;\n  }\n  ngOnInit() {\n    window.addEventListener('unload', () => {\n      if (!this.isPageReloading) {\n        this.logout();\n      }\n    });\n    // Configurar un escuchador para el evento 'keydown' para detectar una recarga de página (F5)\n    window.addEventListener('keydown', event => {\n      if (event.key === 'F5') {\n        this.isPageReloading = true;\n      }\n      this.onActivity();\n    });\n    window.addEventListener('click', () => {\n      this.onActivity();\n    });\n    // Obtener el firstname y los logs desde el token almacenado en el LocalStorage\n    const token = localStorage.getItem('access_token');\n    if (token) {\n      const tokenData = JSON.parse(atob(token.split('.')[1]));\n      this.firstname = tokenData.firstname;\n      this.logs = tokenData.logs || []; // Si el token no contiene datos de logs, se establece un arreglo vacío\n    }\n\n    this.calculateTotalPages();\n    this.startSessionTimeout();\n  }\n  calculateTotalPages() {\n    this.totalPages = Math.ceil(this.logs.length / this.pageSize);\n  }\n  goToPage(pageNumber) {\n    if (pageNumber >= 1 && pageNumber <= this.totalPages) {\n      this.currentPage = pageNumber;\n    }\n  }\n  getPaginatedLogs() {\n    const startIndex = (this.currentPage - 1) * this.pageSize;\n    const endIndex = startIndex + this.pageSize;\n    return this.logs.slice(startIndex, endIndex);\n  }\n  logout() {\n    // Elimina el token de acceso del LocalStorage\n    localStorage.removeItem('access_token');\n    setTimeout(() => {\n      alert('Se ha cerrado sesión.');\n    }, 500);\n    // Muestra una alerta de cierre de sesión si el usuario cierra sesión manualmente\n    // Redirige al usuario a la página de inicio de sesión (\"/login\") después de cerrar sesión\n    this.router.navigate(['/login']);\n  }\n  onActivity() {\n    clearTimeout(this.timeoutId); // Reinicia el temporizador\n    this.startSessionTimeout(); // Establece el nuevo temporizador\n  }\n\n  startSessionTimeout() {\n    this.timeoutId = setTimeout(() => this.logout(), this.sessionTimeout);\n  }\n}\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.Router));\n};\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 29,\n  vars: 8,\n  consts: [[1, \"logout-button\", 3, \"click\"], [1, \"form-container\"], [1, \"table-container\"], [4, \"ngFor\", \"ngForOf\"], [1, \"pagination\"], [3, \"disabled\", \"click\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"h1\");\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_3_listener() {\n        return ctx.logout();\n      });\n      i0.ɵɵtext(4, \"Cerrar Sesi\\u00F3n\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"form\", 1)(6, \"div\", 2)(7, \"table\")(8, \"caption\");\n      i0.ɵɵtext(9, \"Historial de acceso\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"thead\")(11, \"tr\")(12, \"th\");\n      i0.ɵɵtext(13, \"Fecha\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"th\");\n      i0.ɵɵtext(15, \"Estado\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"tbody\");\n      i0.ɵɵtemplate(17, HomeComponent_tr_17_Template, 5, 2, \"tr\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"div\", 4)(19, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_19_listener() {\n        return ctx.goToPage(1);\n      });\n      i0.ɵɵtext(20, \"Primera\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_21_listener() {\n        return ctx.goToPage(ctx.currentPage - 1);\n      });\n      i0.ɵɵtext(22, \"Anterior\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"span\");\n      i0.ɵɵtext(24);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_25_listener() {\n        return ctx.goToPage(ctx.currentPage + 1);\n      });\n      i0.ɵɵtext(26, \"Siguiente\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_27_listener() {\n        return ctx.goToPage(ctx.totalPages);\n      });\n      i0.ɵɵtext(28, \"\\u00DAltima\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Bienvenido, \", ctx.firstname, \"!\");\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngForOf\", ctx.getPaginatedLogs());\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.currentPage === 1);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.currentPage === 1);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate2(\"P\\u00E1gina \", ctx.currentPage, \" de \", ctx.totalPages, \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.currentPage === ctx.totalPages);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.currentPage === ctx.totalPages);\n    }\n  },\n  dependencies: [i2.NgForOf, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm],\n  styles: [\".logout-button[_ngcontent-%COMP%] {\\n  background-color: white;\\n  color: #5d3884;\\n  border: none;\\n  padding: 10px 20px;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  position: absolute;\\n  top: 10px;\\n  right: 10px;\\n}\\n\\n.form-container[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n  background-color: #ffffff;\\n  border-radius: 8px;\\n  padding: 20px;\\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\\n}\\n\\nform[_ngcontent-%COMP%] {\\n  background-color: #ffffff;\\n  border-radius: 8px;\\n  padding: 20px;\\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\\n}\\n\\n.table-container[_ngcontent-%COMP%] {\\n  margin-bottom: 20px;\\n}\\n\\ntable[_ngcontent-%COMP%] {\\n  margin: 0 auto; \\n\\n  width: auto; \\n\\n  background-color: #ffffff; \\n\\n  border-bottom-left-radius: 8px; \\n\\n  border-bottom-right-radius: 8px;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); \\n\\n  border-collapse: separate; \\n\\n  border-spacing: 0; \\n\\n}\\n\\nth[_ngcontent-%COMP%] {\\n  color: #5d3884;\\n  padding: 10px;\\n  text-align: center;\\n  border: none; \\n\\n  border-bottom: 1px solid #e0e0e0; \\n\\n}\\n\\ntd[_ngcontent-%COMP%] {\\n  color: #5d3884;\\n  padding: 10px;\\n  text-align: center;\\n  border: none; \\n\\n  border-top: 1px solid #e0e0e0; \\n\\n}\\n\\ncaption[_ngcontent-%COMP%] {\\n  padding: 10px;\\n  font-size: 18px;\\n  font-weight: bold;\\n  background-color: #ffd54f; \\n\\n  border-top-left-radius: 8px; \\n\\n  border-top-right-radius: 8px; \\n\\n  caption-side: top; \\n\\n}\\n\\nh1[_ngcontent-%COMP%] {\\n  color: #5d3884;\\n  text-align: center; \\n\\n  font-family: \\\"Arial Rounded MT Bold\\\", sans-serif; \\n\\n}\\n\\n\\n\\n.pagination[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  margin-top: 10px;\\n}\\n\\n.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  background-color: white;\\n  color: #5d3884;\\n  border: none;\\n  padding: 10px 20px;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  margin: 5px;\\n}\\n\\n.pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  margin: 5px;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvaG9tZS9ob21lLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSx1QkFBdUI7RUFDdkIsY0FBYztFQUNkLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsU0FBUztFQUNULFdBQVc7QUFDYjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLG1CQUFtQjtFQUNuQixzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2Isd0NBQXdDO0FBQzFDOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2Isd0NBQXdDO0FBQzFDOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsY0FBYyxFQUFFLHFDQUFxQztFQUNyRCxXQUFXLEVBQUUsMkRBQTJEO0VBQ3hFLHlCQUF5QixFQUFFLGlCQUFpQjtFQUM1Qyw4QkFBOEIsRUFBRSx5Q0FBeUM7RUFDekUsK0JBQStCO0VBQy9CLHdDQUF3QyxFQUFFLGlCQUFpQjtFQUMzRCx5QkFBeUIsRUFBRSx1QkFBdUI7RUFDbEQsaUJBQWlCLEVBQUUsc0NBQXNDO0FBQzNEOztBQUVBO0VBQ0UsY0FBYztFQUNkLGFBQWE7RUFDYixrQkFBa0I7RUFDbEIsWUFBWSxFQUFFLG9EQUFvRDtFQUNsRSxnQ0FBZ0MsRUFBRSxpREFBaUQ7QUFDckY7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixZQUFZLEVBQUUsK0NBQStDO0VBQzdELDZCQUE2QixFQUFFLDRDQUE0QztBQUM3RTs7QUFFQTtFQUNFLGFBQWE7RUFDYixlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLHlCQUF5QixFQUFFLHFCQUFxQjtFQUNoRCwyQkFBMkIsRUFBRSx5Q0FBeUM7RUFDdEUsNEJBQTRCLEVBQUUsdUNBQXVDO0VBQ3JFLGlCQUFpQixFQUFFLDRDQUE0QztBQUNqRTs7QUFFQTtFQUNFLGNBQWM7RUFDZCxrQkFBa0IsRUFBRSxxQkFBcUI7RUFDekMsZ0RBQWdELEVBQUUsc0JBQXNCO0FBQzFFOztBQUVBLDBDQUEwQztBQUMxQztFQUNFLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsbUJBQW1CO0VBQ25CLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLHVCQUF1QjtFQUN2QixjQUFjO0VBQ2QsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLFdBQVc7QUFDYjs7QUFFQTtFQUNFLFdBQVc7QUFDYiIsInNvdXJjZXNDb250ZW50IjpbIi5sb2dvdXQtYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICBjb2xvcjogIzVkMzg4NDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgcGFkZGluZzogMTBweCAyMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogMTBweDtcclxuICByaWdodDogMTBweDtcclxufVxyXG5cclxuLmZvcm0tY29udGFpbmVyIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgNHB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbn1cclxuXHJcbmZvcm0ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIHBhZGRpbmc6IDIwcHg7XHJcbiAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxufVxyXG5cclxuLnRhYmxlLWNvbnRhaW5lciB7XHJcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxufVxyXG5cclxudGFibGUge1xyXG4gIG1hcmdpbjogMCBhdXRvOyAvKiBDZW50cmFyIGxhIHRhYmxhIGhvcml6b250YWxtZW50ZSAqL1xyXG4gIHdpZHRoOiBhdXRvOyAvKiBDYW1iaWFyIGEgJ2F1dG8nIHBhcmEgYWp1c3RhcnNlIGFsIHRhbWHDg8KxbyBkZSBsb3MgZGF0b3MgKi9cclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOyAvKiBGb25kbyBibGFuY28gKi9cclxuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA4cHg7IC8qIFJlZG9uZGVhciBlc3F1aW5hIHN1cGVyaW9yIGl6cXVpZXJkYSAqL1xyXG4gIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA4cHg7XHJcbiAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsgLyogU29tYnJhIHN1YXZlICovXHJcbiAgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTsgLyogU2VwYXJhciBsYXMgY2VsZGFzICovXHJcbiAgYm9yZGVyLXNwYWNpbmc6IDA7IC8qIEVsaW1pbmFyIGVzcGFjaW8gZW50cmUgbGFzIGNlbGRhcyAqL1xyXG59XHJcblxyXG50aCB7XHJcbiAgY29sb3I6ICM1ZDM4ODQ7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgYm9yZGVyOiBub25lOyAvKiBFbGltaW5hciBsb3MgYm9yZGVzIGRlIGxhcyBjZWxkYXMgZGUgZW5jYWJlemFkbyAqL1xyXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTBlMGUwOyAvKiBCb3JkZSBpbmZlcmlvciBwYXJhIGxhcyBjZWxkYXMgZGUgZW5jYWJlemFkbyAqL1xyXG59XHJcblxyXG50ZCB7XHJcbiAgY29sb3I6ICM1ZDM4ODQ7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgYm9yZGVyOiBub25lOyAvKiBFbGltaW5hciBsb3MgYm9yZGVzIGRlIGxhcyBjZWxkYXMgZGUgZGF0b3MgKi9cclxuICBib3JkZXItdG9wOiAxcHggc29saWQgI2UwZTBlMDsgLyogQm9yZGUgc3VwZXJpb3IgcGFyYSBsYXMgY2VsZGFzIGRlIGRhdG9zICovXHJcbn1cclxuXHJcbmNhcHRpb24ge1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgZm9udC1zaXplOiAxOHB4O1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmQ1NGY7IC8qIEFtYXJpbGxvIG1vc3RhemEgKi9cclxuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA4cHg7IC8qIFJlZG9uZGVhciBlc3F1aW5hIHN1cGVyaW9yIGl6cXVpZXJkYSAqL1xyXG4gIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiA4cHg7IC8qIFJlZG9uZGVhciBlc3F1aW5hIHN1cGVyaW9yIGRlcmVjaGEgKi9cclxuICBjYXB0aW9uLXNpZGU6IHRvcDsgLyogUG9zaWNpb25hciBlbCB0w4PCrXR1bG8gYXJyaWJhIGRlIGxhIHRhYmxhICovXHJcbn1cclxuXHJcbmgxIHtcclxuICBjb2xvcjogIzVkMzg4NDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7IC8qIENlbnRyYXIgZWwgdGV4dG8gKi9cclxuICBmb250LWZhbWlseTogXCJBcmlhbCBSb3VuZGVkIE1UIEJvbGRcIiwgc2Fucy1zZXJpZjsgLyogRnVlbnRlIHJlZG9uZGVhZGEgKi9cclxufVxyXG5cclxuLyogRXN0aWxvIHBhcmEgbG9zIGJvdG9uZXMgZGUgcGFnaW5hY2nDg8KzbiAqL1xyXG4ucGFnaW5hdGlvbiB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIG1hcmdpbi10b3A6IDEwcHg7XHJcbn1cclxuXHJcbi5wYWdpbmF0aW9uIGJ1dHRvbiB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgY29sb3I6ICM1ZDM4ODQ7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIG1hcmdpbjogNXB4O1xyXG59XHJcblxyXG4ucGFnaW5hdGlvbiBzcGFuIHtcclxuICBtYXJnaW46IDVweDtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","log_r1","date_time","status","HomeComponent","constructor","router","firstname","logs","sessionTimeout","isPageReloading","currentPage","pageSize","totalPages","ngOnInit","window","addEventListener","logout","event","key","onActivity","token","localStorage","getItem","tokenData","JSON","parse","atob","split","calculateTotalPages","startSessionTimeout","Math","ceil","length","goToPage","pageNumber","getPaginatedLogs","startIndex","endIndex","slice","removeItem","setTimeout","alert","navigate","clearTimeout","timeoutId","ɵɵdirectiveInject","i1","Router","selectors","decls","vars","consts","template","HomeComponent_Template","rf","ctx","ɵɵlistener","HomeComponent_Template_button_click_3_listener","ɵɵtemplate","HomeComponent_tr_17_Template","HomeComponent_Template_button_click_19_listener","HomeComponent_Template_button_click_21_listener","HomeComponent_Template_button_click_25_listener","HomeComponent_Template_button_click_27_listener","ɵɵtextInterpolate1","ɵɵproperty","ɵɵtextInterpolate2"],"sources":["C:\\Users\\Claudio\\Desktop\\pruebas_tecnicas\\Chek\\src\\app\\home\\home.component.ts","C:\\Users\\Claudio\\Desktop\\pruebas_tecnicas\\Chek\\src\\app\\home\\home.component.html"],"sourcesContent":["import { Component, HostListener, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\ninterface LogData {\n  date_time: string;\n  status: string;\n}\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent implements OnInit {\n  firstname: string | null = null;\n  logs: LogData[] = [];\n  private sessionTimeout = 5 * 60 * 1000; // 5 minutos en milisegundos\n  private timeoutId: any; // Usa 'any' para el tipo del temporizador\n  private isPageReloading = false;\n  currentPage: number = 1;\n  pageSize: number = 10;\n  totalPages: number = 1;\n\n  constructor(private router: Router) {}\n\n  ngOnInit(): void {\n    window.addEventListener('unload', () => {\n      if (!this.isPageReloading) {\n        this.logout();\n      }\n    });\n\n    // Configurar un escuchador para el evento 'keydown' para detectar una recarga de página (F5)\n    window.addEventListener('keydown', (event) => {\n      if (event.key === 'F5') {\n        this.isPageReloading = true;\n      }\n      this.onActivity();\n    });\n\n    window.addEventListener('click', () => {\n      this.onActivity();\n    });\n\n    // Obtener el firstname y los logs desde el token almacenado en el LocalStorage\n    const token = localStorage.getItem('access_token');\n    if (token) {\n      const tokenData = JSON.parse(atob(token.split('.')[1]));\n      this.firstname = tokenData.firstname;\n      this.logs = tokenData.logs || []; // Si el token no contiene datos de logs, se establece un arreglo vacío\n    }\n\n    this.calculateTotalPages();\n    this.startSessionTimeout();\n  }\n\n  calculateTotalPages(): void {\n    this.totalPages = Math.ceil(this.logs.length / this.pageSize);\n  }\n\n  goToPage(pageNumber: number): void {\n    if (pageNumber >= 1 && pageNumber <= this.totalPages) {\n      this.currentPage = pageNumber;\n    }\n  }\n\n  getPaginatedLogs(): LogData[] {\n    const startIndex = (this.currentPage - 1) * this.pageSize;\n    const endIndex = startIndex + this.pageSize;\n    return this.logs.slice(startIndex, endIndex);\n  }\n\n  logout(): void {\n    // Elimina el token de acceso del LocalStorage\n    localStorage.removeItem('access_token');\n\n    setTimeout(() => {\n      alert('Se ha cerrado sesión.');\n    }, 500);\n    // Muestra una alerta de cierre de sesión si el usuario cierra sesión manualmente\n\n    // Redirige al usuario a la página de inicio de sesión (\"/login\") después de cerrar sesión\n    this.router.navigate(['/login']);\n  }\n\n  onActivity(): void {\n    clearTimeout(this.timeoutId); // Reinicia el temporizador\n    this.startSessionTimeout(); // Establece el nuevo temporizador\n  }\n\n  startSessionTimeout(): void {\n    this.timeoutId = setTimeout(() => this.logout(), this.sessionTimeout);\n  }\n}\n","<div>\n  <h1>Bienvenido, {{ firstname }}!</h1>\n  <button class=\"logout-button\" (click)=\"logout()\">Cerrar Sesión</button>\n</div>\n\n<form class=\"form-container\">\n  <div class=\"table-container\">\n    <table>\n      <caption>Historial de acceso</caption>\n      <thead>\n        <tr>\n          <th>Fecha</th>\n          <th>Estado</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let log of getPaginatedLogs()\">\n          <td>{{ log.date_time }}</td>\n          <td>{{ log.status }}</td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Elementos de paginación -->\n    <div class=\"pagination\">\n      <button (click)=\"goToPage(1)\" [disabled]=\"currentPage === 1\">Primera</button>\n      <button (click)=\"goToPage(currentPage - 1)\" [disabled]=\"currentPage === 1\">Anterior</button>\n      <span>Página {{ currentPage }} de {{ totalPages }}</span>\n      <button (click)=\"goToPage(currentPage + 1)\" [disabled]=\"currentPage === totalPages\">Siguiente</button>\n      <button (click)=\"goToPage(totalPages)\" [disabled]=\"currentPage === totalPages\">Última</button>\n    </div>\n  </div>\n</form>\n"],"mappings":";;;;;;ICgBQA,EAAA,CAAAC,cAAA,SAA2C;IACrCD,EAAA,CAAAE,MAAA,GAAmB;IAAAF,EAAA,CAAAG,YAAA,EAAK;IAC5BH,EAAA,CAAAC,cAAA,SAAI;IAAAD,EAAA,CAAAE,MAAA,GAAgB;IAAAF,EAAA,CAAAG,YAAA,EAAK;;;;IADrBH,EAAA,CAAAI,SAAA,GAAmB;IAAnBJ,EAAA,CAAAK,iBAAA,CAAAC,MAAA,CAAAC,SAAA,CAAmB;IACnBP,EAAA,CAAAI,SAAA,GAAgB;IAAhBJ,EAAA,CAAAK,iBAAA,CAAAC,MAAA,CAAAE,MAAA,CAAgB;;;ADL9B,OAAM,MAAOC,aAAa;EAUxBC,YAAoBC,MAAc;IAAd,KAAAA,MAAM,GAANA,MAAM;IAT1B,KAAAC,SAAS,GAAkB,IAAI;IAC/B,KAAAC,IAAI,GAAc,EAAE;IACZ,KAAAC,cAAc,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;IAEhC,KAAAC,eAAe,GAAG,KAAK;IAC/B,KAAAC,WAAW,GAAW,CAAC;IACvB,KAAAC,QAAQ,GAAW,EAAE;IACrB,KAAAC,UAAU,GAAW,CAAC;EAEe;EAErCC,QAAQA,CAAA;IACNC,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAE,MAAK;MACrC,IAAI,CAAC,IAAI,CAACN,eAAe,EAAE;QACzB,IAAI,CAACO,MAAM,EAAE;;IAEjB,CAAC,CAAC;IAEF;IACAF,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAGE,KAAK,IAAI;MAC3C,IAAIA,KAAK,CAACC,GAAG,KAAK,IAAI,EAAE;QACtB,IAAI,CAACT,eAAe,GAAG,IAAI;;MAE7B,IAAI,CAACU,UAAU,EAAE;IACnB,CAAC,CAAC;IAEFL,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAE,MAAK;MACpC,IAAI,CAACI,UAAU,EAAE;IACnB,CAAC,CAAC;IAEF;IACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IAClD,IAAIF,KAAK,EAAE;MACT,MAAMG,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACvD,IAAI,CAACrB,SAAS,GAAGiB,SAAS,CAACjB,SAAS;MACpC,IAAI,CAACC,IAAI,GAAGgB,SAAS,CAAChB,IAAI,IAAI,EAAE,CAAC,CAAC;;;IAGpC,IAAI,CAACqB,mBAAmB,EAAE;IAC1B,IAAI,CAACC,mBAAmB,EAAE;EAC5B;EAEAD,mBAAmBA,CAAA;IACjB,IAAI,CAAChB,UAAU,GAAGkB,IAAI,CAACC,IAAI,CAAC,IAAI,CAACxB,IAAI,CAACyB,MAAM,GAAG,IAAI,CAACrB,QAAQ,CAAC;EAC/D;EAEAsB,QAAQA,CAACC,UAAkB;IACzB,IAAIA,UAAU,IAAI,CAAC,IAAIA,UAAU,IAAI,IAAI,CAACtB,UAAU,EAAE;MACpD,IAAI,CAACF,WAAW,GAAGwB,UAAU;;EAEjC;EAEAC,gBAAgBA,CAAA;IACd,MAAMC,UAAU,GAAG,CAAC,IAAI,CAAC1B,WAAW,GAAG,CAAC,IAAI,IAAI,CAACC,QAAQ;IACzD,MAAM0B,QAAQ,GAAGD,UAAU,GAAG,IAAI,CAACzB,QAAQ;IAC3C,OAAO,IAAI,CAACJ,IAAI,CAAC+B,KAAK,CAACF,UAAU,EAAEC,QAAQ,CAAC;EAC9C;EAEArB,MAAMA,CAAA;IACJ;IACAK,YAAY,CAACkB,UAAU,CAAC,cAAc,CAAC;IAEvCC,UAAU,CAAC,MAAK;MACdC,KAAK,CAAC,uBAAuB,CAAC;IAChC,CAAC,EAAE,GAAG,CAAC;IACP;IAEA;IACA,IAAI,CAACpC,MAAM,CAACqC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAClC;EAEAvB,UAAUA,CAAA;IACRwB,YAAY,CAAC,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC;IAC9B,IAAI,CAACf,mBAAmB,EAAE,CAAC,CAAC;EAC9B;;EAEAA,mBAAmBA,CAAA;IACjB,IAAI,CAACe,SAAS,GAAGJ,UAAU,CAAC,MAAM,IAAI,CAACxB,MAAM,EAAE,EAAE,IAAI,CAACR,cAAc,CAAC;EACvE;;AA/EWL,aAAa,C;mBAAbA,aAAa,EAAAT,EAAA,CAAAmD,iBAAA,CAAAC,EAAA,CAAAC,MAAA;AAAA;AAAb5C,aAAa,C;QAAbA,aAAa;EAAA6C,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,uBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCb1B5D,EAAA,CAAAC,cAAA,UAAK;MACCD,EAAA,CAAAE,MAAA,GAA4B;MAAAF,EAAA,CAAAG,YAAA,EAAK;MACrCH,EAAA,CAAAC,cAAA,gBAAiD;MAAnBD,EAAA,CAAA8D,UAAA,mBAAAC,+CAAA;QAAA,OAASF,GAAA,CAAAvC,MAAA,EAAQ;MAAA,EAAC;MAACtB,EAAA,CAAAE,MAAA,yBAAa;MAAAF,EAAA,CAAAG,YAAA,EAAS;MAGzEH,EAAA,CAAAC,cAAA,cAA6B;MAGdD,EAAA,CAAAE,MAAA,0BAAmB;MAAAF,EAAA,CAAAG,YAAA,EAAU;MACtCH,EAAA,CAAAC,cAAA,aAAO;MAECD,EAAA,CAAAE,MAAA,aAAK;MAAAF,EAAA,CAAAG,YAAA,EAAK;MACdH,EAAA,CAAAC,cAAA,UAAI;MAAAD,EAAA,CAAAE,MAAA,cAAM;MAAAF,EAAA,CAAAG,YAAA,EAAK;MAGnBH,EAAA,CAAAC,cAAA,aAAO;MACLD,EAAA,CAAAgE,UAAA,KAAAC,4BAAA,gBAGK;MACPjE,EAAA,CAAAG,YAAA,EAAQ;MAIVH,EAAA,CAAAC,cAAA,cAAwB;MACdD,EAAA,CAAA8D,UAAA,mBAAAI,gDAAA;QAAA,OAASL,GAAA,CAAAtB,QAAA,CAAS,CAAC,CAAC;MAAA,EAAC;MAAgCvC,EAAA,CAAAE,MAAA,eAAO;MAAAF,EAAA,CAAAG,YAAA,EAAS;MAC7EH,EAAA,CAAAC,cAAA,iBAA2E;MAAnED,EAAA,CAAA8D,UAAA,mBAAAK,gDAAA;QAAA,OAASN,GAAA,CAAAtB,QAAA,CAAAsB,GAAA,CAAA7C,WAAA,GAAuB,CAAC,CAAC;MAAA,EAAC;MAAgChB,EAAA,CAAAE,MAAA,gBAAQ;MAAAF,EAAA,CAAAG,YAAA,EAAS;MAC5FH,EAAA,CAAAC,cAAA,YAAM;MAAAD,EAAA,CAAAE,MAAA,IAA4C;MAAAF,EAAA,CAAAG,YAAA,EAAO;MACzDH,EAAA,CAAAC,cAAA,iBAAoF;MAA5ED,EAAA,CAAA8D,UAAA,mBAAAM,gDAAA;QAAA,OAASP,GAAA,CAAAtB,QAAA,CAAAsB,GAAA,CAAA7C,WAAA,GAAuB,CAAC,CAAC;MAAA,EAAC;MAAyChB,EAAA,CAAAE,MAAA,iBAAS;MAAAF,EAAA,CAAAG,YAAA,EAAS;MACtGH,EAAA,CAAAC,cAAA,iBAA+E;MAAvED,EAAA,CAAA8D,UAAA,mBAAAO,gDAAA;QAAA,OAASR,GAAA,CAAAtB,QAAA,CAAAsB,GAAA,CAAA3C,UAAA,CAAoB;MAAA,EAAC;MAAyClB,EAAA,CAAAE,MAAA,mBAAM;MAAAF,EAAA,CAAAG,YAAA,EAAS;;;MA5B9FH,EAAA,CAAAI,SAAA,GAA4B;MAA5BJ,EAAA,CAAAsE,kBAAA,iBAAAT,GAAA,CAAAjD,SAAA,MAA4B;MAeNZ,EAAA,CAAAI,SAAA,IAAqB;MAArBJ,EAAA,CAAAuE,UAAA,YAAAV,GAAA,CAAApB,gBAAA,GAAqB;MASbzC,EAAA,CAAAI,SAAA,GAA8B;MAA9BJ,EAAA,CAAAuE,UAAA,aAAAV,GAAA,CAAA7C,WAAA,OAA8B;MAChBhB,EAAA,CAAAI,SAAA,GAA8B;MAA9BJ,EAAA,CAAAuE,UAAA,aAAAV,GAAA,CAAA7C,WAAA,OAA8B;MACpEhB,EAAA,CAAAI,SAAA,GAA4C;MAA5CJ,EAAA,CAAAwE,kBAAA,iBAAAX,GAAA,CAAA7C,WAAA,UAAA6C,GAAA,CAAA3C,UAAA,KAA4C;MACNlB,EAAA,CAAAI,SAAA,GAAuC;MAAvCJ,EAAA,CAAAuE,UAAA,aAAAV,GAAA,CAAA7C,WAAA,KAAA6C,GAAA,CAAA3C,UAAA,CAAuC;MAC5ClB,EAAA,CAAAI,SAAA,GAAuC;MAAvCJ,EAAA,CAAAuE,UAAA,aAAAV,GAAA,CAAA7C,WAAA,KAAA6C,GAAA,CAAA3C,UAAA,CAAuC"},"metadata":{},"sourceType":"module","externalDependencies":[]}