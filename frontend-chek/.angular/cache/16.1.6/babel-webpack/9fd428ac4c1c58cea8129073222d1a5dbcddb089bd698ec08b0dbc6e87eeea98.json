{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nfunction HomeComponent_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const log_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(log_r1.date_time);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(log_r1.status);\n  }\n}\nexport class HomeComponent {\n  constructor(router) {\n    this.router = router;\n    this.firstname = null;\n    this.logs = [];\n    this.sessionTimeout = 2.5 * 60 * 1000; // 2.5 minutos en milisegundos\n  }\n\n  ngOnInit() {\n    // Obtener el firstname y los logs desde el token almacenado en el LocalStorage\n    const token = localStorage.getItem('access_token');\n    if (token) {\n      const tokenData = JSON.parse(atob(token.split('.')[1]));\n      this.firstname = tokenData.firstname;\n      this.logs = tokenData.logs || []; // Si el token no contiene datos de logs, se establece un arreglo vacío\n    }\n\n    this.startSessionTimeout();\n  }\n  beforeUnloadHandler(event) {\n    this.logout();\n  }\n  logout() {\n    // Elimina el token de acceso del LocalStorage\n    localStorage.removeItem('access_token');\n    setTimeout(() => {\n      alert('Se ha cerrado sesión.');\n    }, 500);\n    // Muestra una alerta de cierre de sesión si el usuario cierra sesión manualmente\n    // Redirige al usuario a la página de inicio de sesión (\"/login\") después de cerrar sesión\n    this.router.navigate(['/login']);\n  }\n  onActivity() {\n    clearTimeout(this.timeoutId); // Reinicia el temporizador\n    this.startSessionTimeout(); // Establece el nuevo temporizador\n  }\n\n  startSessionTimeout() {\n    this.timeoutId = setTimeout(() => this.logout(), this.sessionTimeout);\n  }\n}\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.Router));\n};\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  hostBindings: function HomeComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"beforeunload\", function HomeComponent_beforeunload_HostBindingHandler($event) {\n        return ctx.beforeUnloadHandler($event);\n      }, false, i0.ɵɵresolveWindow);\n    }\n  },\n  decls: 14,\n  vars: 2,\n  consts: [[3, \"click\"], [4, \"ngFor\", \"ngForOf\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"h1\");\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_3_listener() {\n        return ctx.logout();\n      });\n      i0.ɵɵtext(4, \"Cerrar Sesi\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"table\")(6, \"thead\")(7, \"tr\")(8, \"th\");\n      i0.ɵɵtext(9, \"Fecha\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"th\");\n      i0.ɵɵtext(11, \"Estado\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(12, \"tbody\");\n      i0.ɵɵtemplate(13, HomeComponent_tr_13_Template, 5, 2, \"tr\", 1);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Bienvenido, \", ctx.firstname, \"!\");\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngForOf\", ctx.logs);\n    }\n  },\n  dependencies: [i2.NgForOf],\n  styles: [\"\\n\\nbody[_ngcontent-%COMP%] {\\n    font-family: Arial, sans-serif;\\n    margin: 0;\\n    padding: 0;\\n    background-color: #f0f0f0;\\n  }\\n  \\n  .container[_ngcontent-%COMP%] {\\n    max-width: 800px;\\n    margin: 0 auto;\\n    padding: 20px;\\n    background-color: #fff;\\n    border-radius: 5px;\\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\\n  }\\n  \\n  h1[_ngcontent-%COMP%] {\\n    font-size: 24px;\\n    margin-bottom: 20px;\\n  }\\n  \\n  table[_ngcontent-%COMP%] {\\n    width: 100%;\\n    border-collapse: collapse;\\n  }\\n  \\n  \\n\\n  thead[_ngcontent-%COMP%] {\\n    background-color: #333;\\n    color: #fff;\\n  }\\n  \\n  th[_ngcontent-%COMP%] {\\n    padding: 10px;\\n  }\\n  \\n  \\n\\n  tbody[_ngcontent-%COMP%] {\\n    background-color: #fff;\\n  }\\n  \\n  td[_ngcontent-%COMP%] {\\n    padding: 10px;\\n    border-bottom: 1px solid #ddd;\\n  }\\n  \\n  \\n\\n  td[_ngcontent-%COMP%]:last-child {\\n    color: #28a745;\\n    font-weight: bold;\\n  }\\n  \\n  \\n\\n  td[_ngcontent-%COMP%]:last-child:nth-child(2) {\\n    color: #dc3545;\\n    font-weight: bold;\\n  }\\n  \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvaG9tZS9ob21lLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsc0JBQXNCO0FBQ3RCO0lBQ0ksOEJBQThCO0lBQzlCLFNBQVM7SUFDVCxVQUFVO0lBQ1YseUJBQXlCO0VBQzNCOztFQUVBO0lBQ0UsZ0JBQWdCO0lBQ2hCLGNBQWM7SUFDZCxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQix3Q0FBd0M7RUFDMUM7O0VBRUE7SUFDRSxlQUFlO0lBQ2YsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsV0FBVztJQUNYLHlCQUF5QjtFQUMzQjs7RUFFQSx1Q0FBdUM7RUFDdkM7SUFDRSxzQkFBc0I7SUFDdEIsV0FBVztFQUNiOztFQUVBO0lBQ0UsYUFBYTtFQUNmOztFQUVBLG1DQUFtQztFQUNuQztJQUNFLHNCQUFzQjtFQUN4Qjs7RUFFQTtJQUNFLGFBQWE7SUFDYiw2QkFBNkI7RUFDL0I7O0VBRUEsOENBQThDO0VBQzlDO0lBQ0UsY0FBYztJQUNkLGlCQUFpQjtFQUNuQjs7RUFFQSwrQ0FBK0M7RUFDL0M7SUFDRSxjQUFjO0lBQ2QsaUJBQWlCO0VBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiLyogRXN0aWxvcyBnZW5lcmFsZXMgKi9cclxuYm9keSB7XHJcbiAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDtcclxuICB9XHJcbiAgXHJcbiAgLmNvbnRhaW5lciB7XHJcbiAgICBtYXgtd2lkdGg6IDgwMHB4O1xyXG4gICAgbWFyZ2luOiAwIGF1dG87XHJcbiAgICBwYWRkaW5nOiAyMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbiAgfVxyXG4gIFxyXG4gIGgxIHtcclxuICAgIGZvbnQtc2l6ZTogMjRweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIHRhYmxlIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcclxuICB9XHJcbiAgXHJcbiAgLyogRXN0aWxvcyBkZSBsYSBjYWJlY2VyYSBkZSBsYSB0YWJsYSAqL1xyXG4gIHRoZWFkIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzM7XHJcbiAgICBjb2xvcjogI2ZmZjtcclxuICB9XHJcbiAgXHJcbiAgdGgge1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICB9XHJcbiAgXHJcbiAgLyogRXN0aWxvcyBkZWwgY3VlcnBvIGRlIGxhIHRhYmxhICovXHJcbiAgdGJvZHkge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICB9XHJcbiAgXHJcbiAgdGQge1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO1xyXG4gIH1cclxuICBcclxuICAvKiBFc3RpbG9zIHBhcmEgcmVzYWx0YXIgZWwgZXN0YWRvIFwiRXhpdG9zb1wiICovXHJcbiAgdGQ6bGFzdC1jaGlsZCB7XHJcbiAgICBjb2xvcjogIzI4YTc0NTtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIH1cclxuICBcclxuICAvKiBFc3RpbG9zIHBhcmEgcmVzYWx0YXIgZWwgZXN0YWRvIFwiRGVuZWdhZG9cIiAqL1xyXG4gIHRkOmxhc3QtY2hpbGQ6bnRoLWNoaWxkKDIpIHtcclxuICAgIGNvbG9yOiAjZGMzNTQ1O1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgfVxyXG4gICJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","log_r1","date_time","status","HomeComponent","constructor","router","firstname","logs","sessionTimeout","ngOnInit","token","localStorage","getItem","tokenData","JSON","parse","atob","split","startSessionTimeout","beforeUnloadHandler","event","logout","removeItem","setTimeout","alert","navigate","onActivity","clearTimeout","timeoutId","ɵɵdirectiveInject","i1","Router","selectors","hostBindings","HomeComponent_HostBindings","rf","ctx","$event","ɵɵresolveWindow","ɵɵlistener","HomeComponent_Template_button_click_3_listener","ɵɵtemplate","HomeComponent_tr_13_Template","ɵɵtextInterpolate1","ɵɵproperty"],"sources":["C:\\Users\\Claudio\\Desktop\\pruebas_tecnicas\\Chek\\src\\app\\home\\home.component.ts","C:\\Users\\Claudio\\Desktop\\pruebas_tecnicas\\Chek\\src\\app\\home\\home.component.html"],"sourcesContent":["import { Component, HostListener, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\ninterface LogData {\n  date_time: string;\n  status: string;\n}\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent implements OnInit {\n  firstname: string | null = null;\n  logs: LogData[] = [];\n  private sessionTimeout = 2.5 * 60 * 1000; // 2.5 minutos en milisegundos\n  private timeoutId: any; // Usa 'any' para el tipo del temporizador\n\n  constructor(private router: Router) {}\n\n  ngOnInit(): void {\n    // Obtener el firstname y los logs desde el token almacenado en el LocalStorage\n    const token = localStorage.getItem('access_token');\n    if (token) {\n      const tokenData = JSON.parse(atob(token.split('.')[1]));\n      this.firstname = tokenData.firstname;\n      this.logs = tokenData.logs || []; // Si el token no contiene datos de logs, se establece un arreglo vacío\n    }\n    this.startSessionTimeout();\n  }\n\n  @HostListener('window:beforeunload', ['$event'])\n  beforeUnloadHandler(event: Event): void {\n    this.logout();\n  }\n\n  logout(): void {\n    // Elimina el token de acceso del LocalStorage\n    localStorage.removeItem('access_token');\n\n    setTimeout(() => {\n      alert('Se ha cerrado sesión.');\n    }, 500);\n    // Muestra una alerta de cierre de sesión si el usuario cierra sesión manualmente\n\n    // Redirige al usuario a la página de inicio de sesión (\"/login\") después de cerrar sesión\n    this.router.navigate(['/login']);\n  }\n\n  onActivity(): void {\n    clearTimeout(this.timeoutId); // Reinicia el temporizador\n    this.startSessionTimeout(); // Establece el nuevo temporizador\n  }\n\n  startSessionTimeout(): void {\n    this.timeoutId = setTimeout(() => this.logout(), this.sessionTimeout);\n  }\n}\n","  <div>\n    <h1>Bienvenido, {{ firstname }}!</h1>\n    <button (click)=\"logout()\">Cerrar Sesión</button>\n    <table>\n      <thead>\n        <tr>\n          <th>Fecha</th>\n          <th>Estado</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let log of logs\">\n          <td>{{ log.date_time }}</td>\n          <td>{{ log.status }}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}