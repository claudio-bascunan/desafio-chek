{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction HomeComponent_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const log_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(log_r1.date_time);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(log_r1.status);\n  }\n}\nexport class HomeComponent {\n  constructor(router) {\n    this.router = router;\n    // Variables para almacenar datos ingresados por el usuario y preestablecidos\n    this.firstname = null;\n    this.logs = [];\n    this.sessionTimeout = 5 * 60 * 1000; // Tiempo: 5 minutos\n    this.isPageReloading = false;\n    this.currentPage = 1;\n    this.pageSize = 10;\n    this.totalPages = 1;\n  }\n  // Función que se ejecuta al iniciar el componente\n  ngOnInit() {\n    // Detecta cuando se cierra una pagina o se recarga\n    window.addEventListener('unload', () => {\n      if (!this.isPageReloading) {\n        this.logout();\n      }\n    });\n    // Detecta cuando se presiona una tecla\n    window.addEventListener('keydown', event => {\n      if (event.key === 'F5') {\n        this.isPageReloading = true;\n      }\n      this.onActivity();\n    });\n    // Detecta cuando se hace clic\n    window.addEventListener('click', () => {\n      this.onActivity();\n    });\n    const token = localStorage.getItem('access_token');\n    if (token) {\n      const tokenData = JSON.parse(atob(token.split('.')[1]));\n      this.firstname = tokenData.firstname;\n      this.logs = tokenData.logs || [];\n    }\n    this.calculateTotalPages();\n    this.startSessionTimeout();\n  }\n  calculateTotalPages() {\n    this.totalPages = Math.ceil(this.logs.length / this.pageSize);\n  }\n  goToPage(pageNumber) {\n    if (pageNumber >= 1 && pageNumber <= this.totalPages) {\n      this.currentPage = pageNumber;\n    }\n  }\n  getPaginatedLogs() {\n    const startIndex = (this.currentPage - 1) * this.pageSize;\n    const endIndex = startIndex + this.pageSize;\n    return this.logs.slice(startIndex, endIndex);\n  }\n  logout() {\n    localStorage.removeItem('access_token');\n    setTimeout(() => {}, 500);\n    this.router.navigate(['/login']);\n  }\n  onActivity() {\n    clearTimeout(this.timeoutId);\n    this.startSessionTimeout();\n  }\n  startSessionTimeout() {\n    this.timeoutId = setTimeout(() => this.logout(), this.sessionTimeout);\n  }\n}\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.Router));\n};\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 32,\n  vars: 4,\n  consts: [[1, \"container\"], [1, \"button-logout\", 3, \"click\"], [1, \"home-form\"], [1, \"table-container\"], [4, \"ngFor\", \"ngForOf\"], [1, \"pagination\"], [1, \"pagination-item-double\", 3, \"click\"], [\"src\", \"../../assets/left-double-arrow.png\"], [1, \"pagination-item\", 3, \"click\"], [\"src\", \"../../assets/left-arrow.png\"], [\"src\", \"../../assets/right-arrow.png\"], [\"src\", \"../../assets/right-double-arrow.png\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_1_listener() {\n        return ctx.logout();\n      });\n      i0.ɵɵtext(2, \"Cerrar sesi\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"form\", 2)(4, \"div\", 3)(5, \"h1\");\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"table\")(8, \"caption\");\n      i0.ɵɵtext(9, \"Historial de acceso\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"thead\")(11, \"tr\")(12, \"th\");\n      i0.ɵɵtext(13, \"Fecha\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"th\");\n      i0.ɵɵtext(15, \"Estado\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"tbody\");\n      i0.ɵɵtemplate(17, HomeComponent_tr_17_Template, 5, 2, \"tr\", 4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"div\", 5)(19, \"div\", 6);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_div_click_19_listener() {\n        return ctx.goToPage(1);\n      });\n      i0.ɵɵelement(20, \"img\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"div\", 8);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_div_click_21_listener() {\n        return ctx.goToPage(ctx.currentPage - 1);\n      });\n      i0.ɵɵelement(22, \"img\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"span\");\n      i0.ɵɵtext(24);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"div\", 8);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_div_click_25_listener() {\n        return ctx.goToPage(ctx.currentPage + 1);\n      });\n      i0.ɵɵelement(26, \"img\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"div\", 6);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_div_click_27_listener() {\n        return ctx.goToPage(ctx.totalPages);\n      });\n      i0.ɵɵelement(28, \"img\", 11);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(29, \"footer\")(30, \"p\");\n      i0.ɵɵtext(31, \"\\u00A9 Desaf\\u00EDo T\\u00E9cnico Chek Agosto 2023 - Claudio Andr\\u00E9s Bascu\\u00F1\\u00E1n Valdivia\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate1(\"Bienvenido, \", ctx.firstname, \"!\");\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngForOf\", ctx.getPaginatedLogs());\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate2(\"\", ctx.currentPage, \" de \", ctx.totalPages, \"\");\n    }\n  },\n  dependencies: [i2.NgForOf, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm],\n  styles: [\".container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  height: 100vh;\\n}\\n  \\n  form[_ngcontent-%COMP%] {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    padding: 30px;\\n    border-radius: 8px;\\n    background-color: #fff;\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n    max-width: 400px;\\n    width: 100%;\\n  }\\n\\n  .table-container[_ngcontent-%COMP%] {\\n    margin-bottom: 20px;\\n  }\\n\\n  .title-container[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n  }\\n\\n  .button-logout[_ngcontent-%COMP%] {\\n    background-color: #fff;\\n    color: #5d3884;\\n    border: none;\\n    padding: 10px 20px;\\n    border-radius: 4px;\\n    cursor: pointer;\\n    position: absolute;\\n    top: 10px;\\n    right: 10px;\\n    font-weight: bold;\\n  }\\n  \\n  table[_ngcontent-%COMP%] {\\n    margin: 0 auto;\\n    width: auto;\\n    background-color: #fff;\\n    border-bottom-left-radius: 8px;\\n    border-bottom-right-radius: 8px;\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n    border-collapse: separate;\\n    border-spacing: 0;\\n  }\\n  \\n  th[_ngcontent-%COMP%] {\\n    color: #5d3884;\\n    padding: 10px;\\n    text-align: center;\\n    border: none;\\n    border-bottom: 1px solid #e0e0e0;\\n    font-family: \\\"Arial Rounded MT Bold\\\", sans-serif;\\n  }\\n  \\n  td[_ngcontent-%COMP%] {\\n    color: #5d3884;\\n    padding: 10px;\\n    text-align: center;\\n    border: none;\\n    border-top: 1px solid #e0e0e0;\\n    font-family: Arial, sans-serif;\\n  }\\n  \\n  caption[_ngcontent-%COMP%] {\\n    padding: 10px;\\n    font-size: 18px;\\n    font-weight: bold;\\n    font-family: Arial, sans-serif;\\n    background-color: #ffd54f;\\n    border-top-left-radius: 8px;\\n    border-top-right-radius: 8px; \\n    caption-side: top;\\n  }\\n  \\n  h1[_ngcontent-%COMP%] {\\n    color: #371d53;\\n    text-align: center;\\n    font-family: \\\"Arial Rounded MT Bold\\\", sans-serif;\\n  }\\n  \\n  .pagination[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    margin-top: 10px;\\n  }\\n  \\n  .pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n    background-color: white;\\n    color: #5d3884;\\n    border: none;\\n    padding: 10px 20px;\\n    border-radius: 4px;\\n    cursor: pointer;\\n    margin: 5px;\\n  }\\n  \\n  .pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n    margin: 5px;\\n    font-size: 14px;\\n    font-family: Arial, sans-serif;\\n  }\\n  \\n  .pagination-item[_ngcontent-%COMP%] {\\n    cursor: pointer;\\n    padding: 5px;\\n  }\\n\\n  .pagination-item-double[_ngcontent-%COMP%] {\\n    cursor: pointer;\\n    padding: 15px;\\n  }\\n  \\n  .pagination[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n    width: 10px;\\n    height: 10px;\\n  }  \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvaG9tZS9ob21lLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsYUFBYTtBQUNmOztFQUVFO0lBQ0UsYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixtQkFBbUI7SUFDbkIsYUFBYTtJQUNiLGtCQUFrQjtJQUNsQixzQkFBc0I7SUFDdEIsd0NBQXdDO0lBQ3hDLGdCQUFnQjtJQUNoQixXQUFXO0VBQ2I7O0VBRUE7SUFDRSxtQkFBbUI7RUFDckI7O0VBRUE7SUFDRSxhQUFhO0lBQ2IsOEJBQThCO0lBQzlCLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLHNCQUFzQjtJQUN0QixjQUFjO0lBQ2QsWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixrQkFBa0I7SUFDbEIsZUFBZTtJQUNmLGtCQUFrQjtJQUNsQixTQUFTO0lBQ1QsV0FBVztJQUNYLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGNBQWM7SUFDZCxXQUFXO0lBQ1gsc0JBQXNCO0lBQ3RCLDhCQUE4QjtJQUM5QiwrQkFBK0I7SUFDL0Isd0NBQXdDO0lBQ3hDLHlCQUF5QjtJQUN6QixpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxjQUFjO0lBQ2QsYUFBYTtJQUNiLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osZ0NBQWdDO0lBQ2hDLGdEQUFnRDtFQUNsRDs7RUFFQTtJQUNFLGNBQWM7SUFDZCxhQUFhO0lBQ2Isa0JBQWtCO0lBQ2xCLFlBQVk7SUFDWiw2QkFBNkI7SUFDN0IsOEJBQThCO0VBQ2hDOztFQUVBO0lBQ0UsYUFBYTtJQUNiLGVBQWU7SUFDZixpQkFBaUI7SUFDakIsOEJBQThCO0lBQzlCLHlCQUF5QjtJQUN6QiwyQkFBMkI7SUFDM0IsNEJBQTRCO0lBQzVCLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGNBQWM7SUFDZCxrQkFBa0I7SUFDbEIsZ0RBQWdEO0VBQ2xEOztFQUVBO0lBQ0UsYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixtQkFBbUI7SUFDbkIsZ0JBQWdCO0VBQ2xCOztFQUVBO0lBQ0UsdUJBQXVCO0lBQ3ZCLGNBQWM7SUFDZCxZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLGtCQUFrQjtJQUNsQixlQUFlO0lBQ2YsV0FBVztFQUNiOztFQUVBO0lBQ0UsV0FBVztJQUNYLGVBQWU7SUFDZiw4QkFBOEI7RUFDaEM7O0VBRUE7SUFDRSxlQUFlO0lBQ2YsWUFBWTtFQUNkOztFQUVBO0lBQ0UsZUFBZTtJQUNmLGFBQWE7RUFDZjs7RUFFQTtJQUNFLFdBQVc7SUFDWCxZQUFZO0VBQ2QiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBoZWlnaHQ6IDEwMHZoO1xyXG59XHJcbiAgXHJcbiAgZm9ybSB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBwYWRkaW5nOiAzMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbiAgICBtYXgtd2lkdGg6IDQwMHB4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgfVxyXG5cclxuICAudGFibGUtY29udGFpbmVyIHtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgfVxyXG5cclxuICAudGl0bGUtY29udGFpbmVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIH1cclxuXHJcbiAgLmJ1dHRvbi1sb2dvdXQge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICAgIGNvbG9yOiAjNWQzODg0O1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgcGFkZGluZzogMTBweCAyMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOiAxMHB4O1xyXG4gICAgcmlnaHQ6IDEwcHg7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICB9XHJcbiAgXHJcbiAgdGFibGUge1xyXG4gICAgbWFyZ2luOiAwIGF1dG87XHJcbiAgICB3aWR0aDogYXV0bztcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XHJcbiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA4cHg7XHJcbiAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogOHB4O1xyXG4gICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxuICAgIGJvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7XHJcbiAgICBib3JkZXItc3BhY2luZzogMDtcclxuICB9XHJcbiAgXHJcbiAgdGgge1xyXG4gICAgY29sb3I6ICM1ZDM4ODQ7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMGUwZTA7XHJcbiAgICBmb250LWZhbWlseTogXCJBcmlhbCBSb3VuZGVkIE1UIEJvbGRcIiwgc2Fucy1zZXJpZjtcclxuICB9XHJcbiAgXHJcbiAgdGQge1xyXG4gICAgY29sb3I6ICM1ZDM4ODQ7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlMGUwZTA7XHJcbiAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XHJcbiAgfVxyXG4gIFxyXG4gIGNhcHRpb24ge1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIGZvbnQtc2l6ZTogMThweDtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZDU0ZjtcclxuICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDhweDtcclxuICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiA4cHg7IFxyXG4gICAgY2FwdGlvbi1zaWRlOiB0b3A7XHJcbiAgfVxyXG4gIFxyXG4gIGgxIHtcclxuICAgIGNvbG9yOiAjMzcxZDUzO1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgZm9udC1mYW1pbHk6IFwiQXJpYWwgUm91bmRlZCBNVCBCb2xkXCIsIHNhbnMtc2VyaWY7XHJcbiAgfVxyXG4gIFxyXG4gIC5wYWdpbmF0aW9uIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xyXG4gIH1cclxuICBcclxuICAucGFnaW5hdGlvbiBidXR0b24ge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICBjb2xvcjogIzVkMzg4NDtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIG1hcmdpbjogNXB4O1xyXG4gIH1cclxuICBcclxuICAucGFnaW5hdGlvbiBzcGFuIHtcclxuICAgIG1hcmdpbjogNXB4O1xyXG4gICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gIH1cclxuICBcclxuICAucGFnaW5hdGlvbi1pdGVtIHtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIHBhZGRpbmc6IDVweDtcclxuICB9XHJcblxyXG4gIC5wYWdpbmF0aW9uLWl0ZW0tZG91YmxlIHtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIHBhZGRpbmc6IDE1cHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5wYWdpbmF0aW9uIGltZyB7XHJcbiAgICB3aWR0aDogMTBweDtcclxuICAgIGhlaWdodDogMTBweDtcclxuICB9ICAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","log_r1","date_time","status","HomeComponent","constructor","router","firstname","logs","sessionTimeout","isPageReloading","currentPage","pageSize","totalPages","ngOnInit","window","addEventListener","logout","event","key","onActivity","token","localStorage","getItem","tokenData","JSON","parse","atob","split","calculateTotalPages","startSessionTimeout","Math","ceil","length","goToPage","pageNumber","getPaginatedLogs","startIndex","endIndex","slice","removeItem","setTimeout","navigate","clearTimeout","timeoutId","ɵɵdirectiveInject","i1","Router","selectors","decls","vars","consts","template","HomeComponent_Template","rf","ctx","ɵɵlistener","HomeComponent_Template_button_click_1_listener","ɵɵtemplate","HomeComponent_tr_17_Template","HomeComponent_Template_div_click_19_listener","ɵɵelement","HomeComponent_Template_div_click_21_listener","HomeComponent_Template_div_click_25_listener","HomeComponent_Template_div_click_27_listener","ɵɵtextInterpolate1","ɵɵproperty","ɵɵtextInterpolate2"],"sources":["C:\\Users\\Claudio\\Desktop\\pruebas_tecnicas\\Chek\\src\\app\\home\\home.component.ts","C:\\Users\\Claudio\\Desktop\\pruebas_tecnicas\\Chek\\src\\app\\home\\home.component.html"],"sourcesContent":["import { Component, HostListener, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\ninterface LogData {\n  date_time: string;\n  status: string;\n}\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\n\nexport class HomeComponent implements OnInit {\n  \n  // Variables para almacenar datos ingresados por el usuario y preestablecidos\n  firstname: string | null = null;\n  logs: LogData[] = [];\n  private sessionTimeout = 5 * 60 * 1000; // Tiempo: 5 minutos\n  private isPageReloading = false;\n  currentPage: number = 1;\n  pageSize: number = 10;\n  totalPages: number = 1;\n\n  constructor(private router: Router) {}\n\n  // Función que se ejecuta al iniciar el componente\n  ngOnInit(): void {\n\n    // Detecta cuando se cierra una pagina o se recarga\n    window.addEventListener('unload', () => {\n      if (!this.isPageReloading) {\n        this.logout();\n      }\n    });\n\n    // Detecta cuando se presiona una tecla\n    window.addEventListener('keydown', (event) => {\n      if (event.key === 'F5') {\n        this.isPageReloading = true;\n      }\n      this.onActivity();\n    });\n\n    // Detecta cuando se hace clic\n    window.addEventListener('click', () => {\n      this.onActivity();\n    });\n\n    const token = localStorage.getItem('access_token');\n    if (token) {\n      const tokenData = JSON.parse(atob(token.split('.')[1]));\n      this.firstname = tokenData.firstname;\n      this.logs = tokenData.logs || [];\n    }\n\n    this.calculateTotalPages();\n    this.startSessionTimeout();\n  }\n\n  calculateTotalPages(): void {\n    this.totalPages = Math.ceil(this.logs.length / this.pageSize);\n  }\n\n  goToPage(pageNumber: number): void {\n    if (pageNumber >= 1 && pageNumber <= this.totalPages) {\n      this.currentPage = pageNumber;\n    }\n  }\n\n  getPaginatedLogs(): LogData[] {\n    const startIndex = (this.currentPage - 1) * this.pageSize;\n    const endIndex = startIndex + this.pageSize;\n    return this.logs.slice(startIndex, endIndex);\n  }\n\n  logout(): void {\n    localStorage.removeItem('access_token');\n\n    setTimeout(() => {\n    }, 500);\n\n    this.router.navigate(['/login']);\n  }\n\n  onActivity(): void {\n    clearTimeout(this.timeoutId);\n    this.startSessionTimeout();\n  }\n\n  startSessionTimeout(): void {\n    this.timeoutId = setTimeout(() => this.logout(), this.sessionTimeout);\n  }\n}","<div class=\"container\">\n  <button class=\"button-logout\" (click)=\"logout()\">Cerrar sesión</button>\n  <form class=\"home-form\">\n    <div class=\"table-container\">\n      <h1>Bienvenido, {{ firstname }}!</h1>\n      <table>\n        <caption>Historial de acceso</caption>\n        <thead>\n          <tr>\n            <th>Fecha</th>\n            <th>Estado</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let log of getPaginatedLogs()\">\n            <td>{{ log.date_time }}</td>\n            <td>{{ log.status }}</td>\n          </tr>\n        </tbody>\n      </table>\n      <div class=\"pagination\">\n        <div class=\"pagination-item-double\" (click)=\"goToPage(1)\">\n          <img src=\"../../assets/left-double-arrow.png\"/>\n        </div>\n        <div class=\"pagination-item\" (click)=\"goToPage(currentPage - 1)\">\n          <img src=\"../../assets/left-arrow.png\"/>\n        </div>\n        <span>{{ currentPage }} de {{ totalPages }}</span>\n        <div class=\"pagination-item\" (click)=\"goToPage(currentPage + 1)\">\n          <img src=\"../../assets/right-arrow.png\"/>\n        </div>\n        <div class=\"pagination-item-double\" (click)=\"goToPage(totalPages)\">\n          <img src=\"../../assets/right-double-arrow.png\"/>\n        </div>\n      </div>\n    </div>\n  </form>\n  <footer>\n    <p>&copy; Desafío Técnico Chek Agosto 2023 - Claudio Andrés Bascuñán Valdivia</p>\n  </footer>\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}